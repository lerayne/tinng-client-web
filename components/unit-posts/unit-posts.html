<link rel="import" href="../unit-base/unit-base.html">
<link rel="import" href="../card-post/card-post.html">

<polymer-element name="unit-posts" extends="unit-base" vertical layout>
	<template>
		<style>
			:host {

			}

			core-toolbar, core-toolbar::shadow .toolbar-tools {
				height:56px;
			}

			.editor {
				background-color: #fff;
				padding: 20px;
			}

			textarea {
				margin-right:20px;
				font-size: 150%;
				padding:5px;
			}

			.send {
				width:100px
			}
		</style>

		<core-signals
			on-core-signal-secondary-close="{{ meSingle }}"
		></core-signals>

		<unit-posts-deco>
			<core-toolbar>

				<paper-icon-button hidden?="{{ !fullframe }}" on-tap="{{ goBack }}" icon="arrow-back"></paper-icon-button>
				<paper-icon-button icon="menu"></paper-icon-button>

				<span>Name of the topic</span>
			</core-toolbar>

			<div class="content" flex>
				<template repeat="{{post in posts}}">
					<card-post model="{{post}}"></card-post>
				</template>
			</div>

			<div class="editor" horizontal layout>
				<textarea flex></textarea>
				<paper-button self-center raised class="highlight send">
					Send
					<core-icon icon="send"></core-icon>
				</paper-button>
			</div>
		</unit-posts-deco>

	</template>

	<script>
		Polymer({

			created:function(){
				this.posts = [
					{message:1},
					{message:2},
					{message:3},
					{message:4}
				];

				this.fullframe = false;
			},

			ready:function(){
				tinng.units.push(this);
			},

			meSingle:function(){
				this.fullframe = true;
			},

			goBack:function(){

				this.async(function(){this.fullframe = false;}, null, 250)

				this.fire('reveal', {sender:this})
			}
		});
	</script>
</polymer-element>