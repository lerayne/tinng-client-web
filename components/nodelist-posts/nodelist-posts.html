<link rel="import" href="../nodelist-base/nodelist-base.html">

<polymer-element name="nodelist-posts" extends="nodelist-base">
	<template>

		<style>
			#scroll {
				padding: 15px 5px 1px 15px;
			}
		</style>

		<div id="scroll">
			<template repeat="{{ node in nodes }}">
				<card-post model="{{ node }}"></card-post>
			</template>
		</div>

	</template>

	<script>
		Polymer({

			//properties
			sortOrder:'asc',

			//other
			parseUpdates:function(old, nodes){

				this.loaded = true;
				this.loading = false;

				var firstLoad = !this.nodes.length;

				if (firstLoad) {
					// если это первичная загрузка

					// если мы заполняем массив первый раз - нужно его отсортировать
					this.nodes = this.sort(nodes, this.sortField, this.sortOrder);

				} else {
					// если в массиве уже есть ноды
					_(nodes).each(this.processNode);
				}

				if (firstLoad || this.isAtBottom()) {
					this.async(this.toBottom)
				}
			}
		})
	</script>
</polymer-element>